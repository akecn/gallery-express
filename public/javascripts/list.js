// Generated by CoffeeScript 1.6.2
(function() {
  var $, $list, $listItem, $search, $tag;

  $ = jQuery;

  $('#J_List').mixitup();

  setTimeout(function() {
    var height, iframe, parent;

    try {
      document.domain = "kissyui.com";
      parent = window.parent;
      height = document.getElementById('J_List').scrollHeight + 400;
      iframe = parent.document.getElementsByTagName('iframe')[0];
      iframe.height = height;
    } catch (_error) {}
    return $('.J_SortNew').trigger('click');
  }, 1000);

  $search = $('#J_Search');

  $list = $('#J_List');

  $listItem = $list.children('li');

  $search.on('keyup', function(ev) {
    var letter;

    letter = $(ev.target).val();
    if (letter === '') {
      $listItem.show();
      return true;
    }
    $listItem.hide();
    return $listItem.each(function() {
      var $item, d, data, reg, _i, _len;

      $item = $(this);
      data = [$item.attr('data-name'), $item.attr('data-desc'), $item.attr('data-author')];
      reg = new RegExp(letter);
      for (_i = 0, _len = data.length; _i < _len; _i++) {
        d = data[_i];
        if (reg.test(d)) {
          $item.show();
          return true;
        }
      }
    });
  });

  $tag = $('.J_Tag');

  $tag.on('click', function(ev) {
    var $target, coms;

    $tag.removeClass('tag-current');
    $target = $(ev.target);
    $target.addClass('tag-current');
    coms = $target.attr('data-coms');
    $listItem.hide();
    return $listItem.each(function() {
      var $item, name, reg;

      $item = $(this);
      name = $item.attr('data-name');
      reg = new RegExp(name);
      if (reg.test(coms)) {
        return $item.fadeIn("normal");
      }
    });
  });

}).call(this);
